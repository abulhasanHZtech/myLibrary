class DesignerTool{constructor(containerId){this.containerId=containerId;this.init()}loadDependencies(callback){const dependencies=[{type:"css",url:"https://unpkg.com/filepond/dist/filepond.min.css"},{type:"css",url:"https://cdn.quilljs.com/1.3.6/quill.snow.css"},{type:"css",url:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},{type:"css",url:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"},{type:"css",url:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css"},{type:"js",url:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"},{type:"js",url:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"},{type:"js",url:"https://code.jquery.com/jquery-3.5.1.slim.min.js"},{type:"js",url:"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"},{type:"js",url:"https://cdn.quilljs.com/1.3.6/quill.js"},{type:"js",url:"https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"},{type:"js",url:"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.4.0/fabric.min.js"}];const loadScript=(src,callback)=>{const script=document.createElement("script");script.src=src;script.onload=callback;document.head.appendChild(script)};const loadStyle=(href,callback)=>{const link=document.createElement("link");link.rel="stylesheet";link.href=href;link.onload=callback;document.head.appendChild(link)};const loadNext=index=>{if(index>=dependencies.length){callback();return}const dependency=dependencies[index];if(dependency.type==="js"){loadScript(dependency.url,()=>loadNext(index+1))}else if(dependency.type==="css"){loadStyle(dependency.url,()=>loadNext(index+1))}};loadNext(0)}addCustomStyles(){const style=document.createElement("style");style.innerHTML=`
#canvas-container {
border: 1px solid #ccc;
margin-top: 20px;
}
#output-container {
margin-top: 20px;
}
.main_wraper .container-fluid {
    padding: 0;
    overflow-x: hidden;
}
img {
max-width: 100%;
}
.letter_spacing{
letter-spacing: -.8px;
}
.text_sm{
font-size: .875rem;
line-height: 1.25rem;
}
.font_semibold{
font-weight: 600;
}
.text_xl {
font-size: 1.25rem;
line-height: 1.75rem;
}
input, select {
padding: 0.625rem .875rem;
border: 1px solid #d1d5db;
border-radius: 0.5rem;
width: 100%;
color: #101828;
font-size: 1rem;
}
input:focus-visible, select:focus-visible {
outline:none;
border: 1px solid #c9133c;
}
.custom_btn {
border: none;
width: 100%;
padding: .5rem .875rem;
color: #fff;
font-weight: 700;
border-radius: 0.5rem;
background: transparent;
}
.color_btn{
    background: #c9133c;
}
.color_btn:hover{
    background: #a7062a;
}
.border_btn{
    color: #000000;
    border: 1px solid #d0d5dd;
}
.border_btn:hover{
    background: #f9fafb;
}
.next_btn{
    border: 1px solid #ca003a;
    background-color: #eb2451;
    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .12);
    border-radius: 6px;
    font-size: 14px;
    font-family: "Rubik", sans-serif;
    letter-spacing: 0;
    padding: .535rem 1rem;
    color: #fff;
}
.next_btn:hover{
    background-color: #d5133f;
    border-color: #ca123c;
}
.main_wraper {
height: 100vh;
}
.main_col{
padding: 0;
}
.side_tabs .nav-item button {
color: #adb7ff !important;
height: 48px;
width: 48px;
padding: 0;
}
.sidebar_wrapper #pills-tabContent .tab-pane.active {
display: block;
}
.sidebar_wrapper #pills-tabContent .tab-pane {
display: none;
}
.side_tabs .nav-item button.active, .side_tabs .nav-item button:hover {
background-color: #4a57b3;
color: #ffffff !important;
}
.side_tabs{
background-color: #0c144d;
padding-top: 2rem;
border-top-right-radius: 25px;
display: block;
}
.side_tabs li.nav-item {
padding-left: 1rem;
padding-right: 1rem;
margin: 10px 0;
}
.side_tabs .nav-item .nav-link i {
font-size: 20px;
}
.side_tabContent {
border-right: 1px solid #eaecf0;
padding: 2rem 1rem 2rem 0;
position: relative;
}
button#removeSelected {
    position: absolute;
    right: 18px;
    bottom: 34px;
    width: fit-content;
}
.inner_tabs #pills-tab {
border-bottom: 1px solid #ebebeb;
gap: 0.5rem;
}
.inner_tabs #pills-tab button {
background-color: transparent;
}
.inner_tabs #pills-tab button {
background-color: transparent;
padding: .5rem;
color: #667085;
border-bottom: 3px solid transparent;
border-radius: 0;
font-weight: 700;
}
.inner_tabs #pills-tab button.active, .inner_tabs #pills-tab button:hover {
border-bottom: 3px solid #a7062a;
color: #a7062a;
}
.fileuplad_main{
max-height: 287.672px;
overflow-y: auto;
}
.fileuplad_wrapper {
position: relative;
padding: 1rem 1.5rem;
text-align: center;
border: 2px solid #ebebeb;
border-radius: 0.5rem;
}
.fileuplad_wrapper input#imageUploader {
position: absolute;
left: 0;
right: 0;
margin: 0 auto;
width: 100%;
height: 100%;
opacity: 0;
top: 0;
cursor: pointer;
padding: 0;
}
.upload_icon {
border: 1px solid #d1d5db;
height: 40px;
width: 40px;
line-height: 40px;
border-radius: 0.5rem;
margin: 0px auto 13px auto;
}
.upload_icon i {
font-size: 20px;
}
.fileuplad_wrapper p span {
color: #a7062a;
font-weight: 700;
}
.img_wrapper {
display: flex;
align-items: center;
gap: .75rem;
flex-wrap: wrap;
margin-top: .75rem;
}
.img_wrapper .img_main {
width: calc(95% / 2);
position: relative;
overflow: hidden;
border-radius: 9px;
}
.img_wrapper .img_main:before {
content: '';
position: absolute;
left: 0;
right: 0;
margin: 0 auto;
width: 100%;
height: 0;
background-color: #000;
opacity: 0;
transition-duration: .3s;
}
.img_wrapper .img_main button {
position: absolute;
top: 4px;
right: 4px;
height: 24px;
width: 24px;
line-height: 20px;
border: 0;
background-color: #fff;
border-radius: 100%;
padding: 0;
color: #f04438;
font-size: 17px;
opacity: 0;
transition-duration: .3s;
}
.img_wrapper .img_main:hover button{
opacity: 1;
}
.img_wrapper .img_main:hover:before {
opacity: 32%;
height: 100%;
}
body pre.language-html::-webkit-scrollbar {
height: 8px !important;
width: 8px !important;
}
.fileuplad_main::-webkit-scrollbar, .scroll_div::-webkit-scrollbar {
width: 8px;
}
.fileuplad_main::-webkit-scrollbar-track, .scroll_div::-webkit-scrollbar-track, pre.language-html::-webkit-scrollbar-track {
background: transparent; 
}
.fileuplad_main::-webkit-scrollbar-thumb, .scroll_div::-webkit-scrollbar-thumb, pre.language-html::-webkit-scrollbar-thumb{
background: #b3b3b3; 
border-radius: 10px;
}
.heading_main.scroll_div{
max-height: 292px;
}
.heading_wrapper{
border: 1px solid #eaecf0;
border-radius: 0.5rem;
margin-bottom: 1rem;
}
.heading_main .heading_wrapper p{
display: inline-block;
letter-spacing: 0em;
line-height: 1;
opacity: 1;
font-weight: 300;
font-style: normal;
text-transform: none;
color: rgb(0, 0, 0, 1);
word-break: break-word;
width: 100%;
margin: 0;
cursor: pointer;
padding: 1.25rem;
}
.heading_main .heading_wrapper:nth-child(1) p{
font-size: 32pt;
}
.heading_main .heading_wrapper:nth-child(2) p{
font-size: 24pt;
}
.heading_main .heading_wrapper:nth-child(3) p{
font-size: 16pt;
}
.heading_main .heading_wrapper:nth-child(4) p{
font-size: 12pt;
}
.back_btn_wrapper {
    display: flex;
    align-items: baseline;
    gap: 10px;
}
.back_btn {
    border: none;
    background-color: transparent;
    padding: 0;
}
.two_col {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: center;
}
.font_size {
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    padding: 0.625rem .875rem;
    gap: 10px;
}
.font_size input[type="number"] {
    padding: 0;
}
.font_size input[type="number"] {
    padding: 0;
    border: none;
    border-radius: 0;
}
.font_size input[type="number"]::-webkit-outer-spin-button,
.font_size input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.font_size input[type="number"] {
  -moz-appearance: textfield;
}
.font_size span {
    color: #98a2b3;
}
select[name="font_weight"], .font_size {
    width: 50%;
}
.back_div select, .back_div input {
    font-weight: 600;
}
.text-align {
    padding: .25rem;
    display: flex;
    align-items: center;
    justify-content: space-around;
    border: 1px solid #eaecf0;
    background-color: #f9fafb;
    border-radius: 0.375rem;
}
.text-align button {
    border: none;
    background-color: transparent;
    color: #344054;
    border-radius: 0.375rem;
    padding: .375rem 0;
    width: 62px;
    height: 44px;
}
.text-align button.active {
    background-color: #fff;
    border: 1px solid;
}
.color_weight {
    display: flex;
    align-items: center;
    gap: 20px;
}
.color_weight #favcolor {
    background-color: transparent;
    border: none;
    width: 1.5rem;
    height: 1.5rem;
    padding: 0;
}
.color_weight .text_weight {
    display: flex;
    align-items: center;
    gap: 20px;
}
.color_weight .text_weight button {
    background-color: transparent;
    height: 2.5rem;
    width: 2.5rem;
    padding: .5rem;
    border-radius: 0.5rem;
    border: 1px solid #d1d5db;
}
.color_weight .text_weight button:hover {
    background-color: #f9fafb;
}
.canvas_wrapper {
    background-color: #f9fafb;
}
.canvas_wrapper_header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .875rem 2rem;
    background-color: #fff;
}
.btn_groups {
    display: flex;
    align-items: center;
    gap: 15px;
}
.canvas_wrapper_header .btn_groups .custom_btn.border_btn, .canvas_wrapper_header .btn_groups .custom_btn.color_btn {
    width: auto;
    display: flex;
    align-items: center;
    gap: 10px;
}
.form-check.form-switch {
    padding: 0 0 0 45px;
    margin: 0;
    float: unset;
}
input#flexSwitchCheckDefault {
    position: relative;
    padding: 9px 18px;
    margin: 0;
}
input#flexSwitchCheckDefault:before, input#flexSwitchCheckDefault:after{
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
    font-weight: 500;
}
input#flexSwitchCheckDefault:before {
    content: 'Visual';
    left: -44px;
}
input#flexSwitchCheckDefault:after {
    content: 'Code';
    right: -40px;
}
.form-check-input:focus {
    border-color: #d1d5db !important;
    outline: none;
    box-shadow: none;
}
.form-check-input:checked {
    background-color: #c9133c;
    border-color: #c9133c;
}
.create_artwork_wrapper .row {
    align-items: center;
}
.btn_wrapper {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    column-gap: 8px;
    row-gap: 5px;
}
.btn_wrapper button {
    width: calc(98.5% / 2);
    padding: 23px 10px;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    border-radius: 6px;
}
.active_btn {
    border-color: #eb2451;
    color: #eb2451;
}
.select_size_wrapper h4 {
    font-size: 2rem;
    margin: 1.5rem 0;
}
.select_size_wrapper .custom_btn.next_btn {
    width: fit-content;
    margin: 30px 0 auto auto;
    display: block;
}
.canva-view{
    display: none;
}
.create_artwork_wrapper{
    display: block;
}

.size-btn.active {
    
    border-color: #eb2451; 
}
.main-canva{
    display: flex;
    align-items: center;
    justify-content: center;
    height: 88%;
}
.front_div{
    display: block;
}
.back_div{
    display: none;
}
.image-list {
    display: flex;
    flex-wrap: wrap;
    margin-top: 20px;
}

.image-item {
    position: relative;
    margin: 10px;
}

.image-item img {
    max-width: 100px;
    max-height: 100px;
    display: block;
}

.trash-button {
    position: absolute;
    top: 0;
    right: 0;
    background: red;
    color: white;
    border: none;
    cursor: pointer;
}
div#htmlEditor {
    max-width: 780px;
    margin: 25px auto 0 auto;
}
pre.language-html {
    background-color: #fff;
    margin: 0 auto;
    padding: 0.5rem;
    font-size: .875rem;
    line-height: 1.25rem;
    border: 1px solid #eaecf0;
    overflow: scroll;
    height: 400px !important;
}
div#htmlEditor button#downloadHtml {
    max-width: fit-content;
    margin-top: 25px;
}
.create_artwork_wrapper img {
    max-width: 60%;
}
.color_weight .text_weight .active {
    border: 1px solid;
}
    `;document.head.appendChild(style)}init(){this.loadDependencies(()=>{const container=document.getElementById(this.containerId);if(!container){console.error(`Container with id "${this.containerId}" not found`);return}container.innerHTML=`
            <div class="main_wraper">
    <div class="container-fluid h-100">
        <div class="row">
            <div class="create_artwork_wrapper">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="select_size_wrapper">
                                <h4>Create Artwork</h4>
                                <form>
                                    <label data-v-25884ac2="" class="opacity-7 mb-2">Select size</label>
                                    <div class="btn_wrapper">
                                        <button class="custom_btn border_btn btn_disabled size-btn active" data-height="4" data-width="6"><i class="fa fa-picture-o" aria-hidden="true"></i> 4" x 6" Postcard</button>
                                        <button class="custom_btn border_btn btn_disabled size-btn" data-height="6" data-width="9"><i class="fa fa-picture-o" aria-hidden="true"></i> 6" x 9" Postcard</button>
                                        <!-- <button class="custom_btn border_btn btn_disabled size-btn" data-height="6" data-width="11"><i class="fa fa-picture-o" aria-hidden="true"></i> 6" x 11" Postcard</button>
                                        <button class="custom_btn border_btn btn_disabled size-btn" data-height="8.5" data-width="11"><i class="fa fa-picture-o" aria-hidden="true"></i> 8.5" x 11" Letter</button> -->
                                    </div>
                                    <button class="custom_btn next_btn">Next</button>
                                </form>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <img src="https://app.directmailmanager.com/_nuxt/img/guy.8bcda05.svg"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row h-100 canva-view">
            <div class="col-lg-4 h-100 main_col" id="sidebar">
                <div class="sidebar_wrapper h-100">
                    <div class="sidebar_ h-100">
                        <div class="d-flex align-items-start h-100">
                            <ul class="side_tabs nav nav-pills flex-column nav-pills me-3 align-items-end h-100" id="pills-tab" role="tablist">
                                <li class="nav-item" role="presentation">
                                <button class="nav-link text-primary fw-semibold active position-relative" id="pills-text-tab" data-bs-toggle="pill" data-bs-target="#pills-text" type="button" role="tab" aria-controls="pills-text" aria-selected="true"><i class="fa fa-text-width" aria-hidden="true"></i></button>
                                </li>
                                <li class="nav-item" role="presentation">
                                <button class="nav-link text-primary fw-semibold position-relative" id="pills-image-tab" data-bs-toggle="pill" data-bs-target="#pills-image" type="button" role="tab" aria-controls="pills-image" aria-selected="false"><i class="fa fa-picture-o" aria-hidden="true"></i></button>
                                </li>
                                <li class="nav-item" role="presentation">
                                <button class="nav-link text-primary fw-semibold position-relative" id="pills-qrcode-tab" data-bs-toggle="pill" data-bs-target="#pills-qrcode" type="button" role="tab" aria-controls="pills-qrcode" aria-selected="false"><i class="fa fa-qrcode" aria-hidden="true"></i></button>
                                </li>
                            </ul>
                            <ul class="side_tabs nav nav-pills flex-column nav-pills me-3 align-items-end h-100" id="back_tab" role="tablist" style="display: none;">
                                <li class="nav-item" role="presentation">
                                <button class="nav-link text-primary fw-semibold active position-relative" id="back_tab_btn"   type="button" role="tab" aria-controls="pills-text" aria-selected="true"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
                                </li>
                            </ul>
                            <div class="side_tabContent w-100 h-100" id="pills-tabContent">
                                <div class="tab-pane fade show active" id="pills-text" role="tabpanel" aria-labelledby="pills-text-tab">
                                    <div class="front_div">
                                        <div class="tab_header mb-3">
                                            <h2 class="text_xl font_semibold letter_spacing mb-1">Add Text</h2>
                                            <p class="text_sm letter_spacing mb-0">Add a new text / or select an existing textbox on your artboard to edit.</p>
                                        </div>
                                        <div class="heading_main">
                                            <div class="heading_wrapper">
                                                <p class="mb-0 add_text_btn"  data-text="Heading 1">Heading 1</p>
                                            </div>
                                            <div class="heading_wrapper">
                                                <p class="mb-0 add_text_btn" data-text="Heading 2">Heading 2</p>
                                            </div>
                                            <div class="heading_wrapper">
                                                <p class="mb-0 add_text_btn" data-text="Heading 3">Heading 3</p>
                                            </div>
                                            <div class="heading_wrapper">
                                                <p class="mb-0 add_text_btn" data-text="Paragraph">Paragraph</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="back_div">
                                        <div class="back_btn_wrapper mb-4">
                                            <button id="back_btn" class="back_btn"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>
                                            <p class="text_xl font_semibold letter_spacing mb-0">Edit text style</p>
                                        </div>
                                        <div class="text_style scroll_div">
                                            <p class="text_sm font_semibold letter_spacing mb-2">Text</p>
                                            <div class="style_wrapper">
                                                <select id="fontFamily" name="family" class="mb-3">
                                                   
                                                    <option value="Arial">Arial</option>
                                                    <option value="Arial Black">Arial Black</option>
                                                    <option value="Courier New">Courier New</option>
                                                    <option value="Georgia">Georgia</option>
                                                    <option value="Helvetica">Helvetica</option>
                                                    <option value="Impact">Impact</option>
                                                    <option value="Inconsolata">Inconsolata</option>
                                                    <option value="Lato">Lato</option>
                                                    <option value="Lucida Console">Lucida Console</option>
                                                    <option value="Lucida Sans Unicode">Lucida Sans Unicode</option>
                                                    <option value="Merriweather">Merriweather</option>
                                                    <option value="Montserrat">Montserrat</option>
                                                    <option value="Noto Sans">Noto Sans</option>
                                                    <option value="Nunito">Nunito</option>
                                                    <option value="Open Sans">Open Sans</option>
                                                    <option value="Oswald">Oswald</option>
                                                    <option value="Palatino Linotype">Palatino Linotype</option>
                                                    <option value="Poppins">Poppins</option>
                                                    <option value="PT Sans">PT Sans</option>
                                                    <option value="Playfair Display">Playfair Display</option>
                                                    <option value="Quicksand">Quicksand</option>
                                                    <option value="Raleway">Raleway</option>
                                                    <option value="Roboto">Roboto</option>
                                                    <option value="Rubik">Rubik</option>
                                                    <option value="Sans-Serif">Sans-Serif</option>
                                                    <option value="Source Sans Pro">Source Sans Pro</option>
                                                    <option value="Tahoma">Tahoma</option>
                                                    <option value="Times New Roman" selected>Times New Roman</option>
                                                    <option value="Trebuchet MS">Trebuchet MS</option>
                                                    <option value="Verdana">Verdana</option>
                                                </select>
                                                <div class="two_col">
                                                    <select id="fontWeight" name="weight" class="">
                                                        <option value="300" selected>Light</option>
                                                        <option value="400">Regular</option>
                                                        <option value="500">Medium</option>
                                                        <option value="600">Semi Bold</option>
                                                        <option value="700">Bold</option>
                                                    </select>
                                                    <div class="font_size d-flex justify-content-center align-items-center">
                                                        <i class="fa fa-text-width" aria-hidden="true"></i>
                                                        <input type="number" id="fontSize" min="1" placeholder="Font Size"/>
                                                        <span>pt</span>
                                                    </div>
                                                </div>
                                                <div class="text-align mt-3">
                                                    <button class="left_align"><i class="fa fa-align-left" aria-hidden="true"></i></button>
                                                    <button class="center_align"><i class="fa fa-align-center" aria-hidden="true"></i></button>
                                                    <button class="right_align"><i class="fa fa-align-right" aria-hidden="true"></i></button>
                                                    <button class="justify_align"><i class="fa fa-align-justify" aria-hidden="true"></i></button>
                                                </div>
                                                <div class="color_weight mt-3">
                                                    <input type="color" id="favcolor" name="favcolor" value="#000">
                                                    <div class="text_weight ">
                                                        <button class="bold_btn"><i class="fa fa-bold" aria-hidden="true"></i></button>
                                                        <button class="italic_btn"><i class="fa fa-italic" aria-hidden="true"></i></button>
                                                        <button class="underline_btn"><i class="fa fa-underline" aria-hidden="true"></i></button>
                                                    </div>
                                                </div>
                                            </div>
                                            <button id="removeSelected" class="custom_btn border_btn removeSelected"><i class="fa fa-trash-o" aria-hidden="true"></i> Delete</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-image" role="tabpanel" aria-labelledby="pills-image-tab">
                                    <div class="tab_header mb-3">
                                        <h2 class="text_xl font_semibold letter_spacing mb-1">Add image</h2>
                                        <p class="text_sm letter_spacing mb-0">Search for royalty free images, add images from URLâ€™s or from your assets.</p>
                                    </div>
                                    <div class="inner_tabs">
                                            <ul class="nav nav-pills nav-pills align-items-end mb-4" id="pills-tab" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                <button class="text_sm letter_spacing font_semibold nav-link active position-relative" id="pills-img_url-tab" data-bs-toggle="pill" data-bs-target="#pills-img_url" type="button" role="tab" aria-controls="pills-img_url" aria-selected="true">Image URL</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                <button class="text_sm letter_spacing font_semibold nav-link  position-relative" id="pills-assets-tab" data-bs-toggle="pill" data-bs-target="#pills-assets" type="button" role="tab" aria-controls="pills-assets" aria-selected="false">Assets</button> 
                                            </ul>
                                            <div class="w-100" id="pills-tabContent">
                                                <div class="tab-pane fade show active" id="pills-img_url" role="tabpanel" aria-labelledby="pills-img_url-tab">
                                                    <label class="text_sm letter_spacing font_semibold mb-1">Use image URL</label>
                                                    <p class="text_sm letter_spacing mb-2">Please use a public image URL</p>

                                                        <input type="url" id="imageUrl" pattern="https://.*" class="mb-2" placeholder="https://picsum.photos" />
                                                        <button type="submit" id="addImageFromUrl" class="custom_btn color_btn">Add to canvas</button>

                                                </div>

                                                <div class="tab-pane fade" id="pills-assets" role="tabpanel" aria-labelledby="pills-assets-tab">
                                                    <label class="text_sm letter_spacing font_semibold mb-1">Upload your image</label>
                                                    <div class="fileuplad_main">
                                                        <div class="fileuplad_wrapper">
                                                            <div class="fileUpload_label">
                                                                <div class="upload_icon">
                                                                    <i class="fa fa-cloud-upload" aria-hidden="true"></i>
                                                                </div>
                                                                <p class="text_sm letter_spacing mb-0"><span>Click to upload</span> or drag and drop SVG, PNG, JPG, GIF, or PDF </p>
                                                            </div>
                                                            <input type="file" id="imageUploader" accept=".svg,.png,.jpg,.jpeg,.gif,.pdf" />
                                                        </div>
                                                        <div id="imageList" class="image-list">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-qrcode" role="tabpanel" aria-labelledby="pills-qrcode-tab">
                                    <div class="tab_header mb-3">
                                        <h2 class="text_xl font_semibold letter_spacing mb-1">Conversion tracking</h2>
                                            <label class="text_sm letter_spacing font_semibold mb-1">URL</label>
                                                <input type="url" id="qrText" class="mb-2" placeholder="https://picsum.photos" />
                                                <p class="text_sm letter_spacing mb-2">Enter your URL for QR code generation</p>
                                                <button id="generateQR" class="custom_btn color_btn">Create QR code</button>
                                                <button id="removeSelected" class="custom_btn border_btn removeSelected"><i class="fa fa-trash-o" aria-hidden="true"></i> Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 h-100 main_col" id="main-section">
                <div class="canvas_wrapper h-100">
                    <div class="canvas_wrapper_header">
                        <div class="switcher">
                            <div class="form-check form-switch" id="switch_btn">
                                <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
                            </div>
                        </div>
                        <div class="btn_groups">
                            <button class="custom_btn border_btn"><i class="fa fa-floppy-o" aria-hidden="true"></i> Save</button>
                            <button class="custom_btn color_btn" id="canva_preview"><i class="fa fa-eye" aria-hidden="true"></i> View Proof</button>
                        </div>
                        
                    </div>
                    <div id="htmlEditor" style="display:none;">
                        <pre><code id="htmlCode" class="language-html"></code></pre>
                        <button id="downloadHtml" class="custom_btn color_btn">Download HTML</button>
                    </div>
                    <div class="main-canva" id="canvasContainer">
                        <canvas id="canvas" style="background-color: #fff;"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;this.addCustomStyles();this.initializeTool()})}initializeTool(){this.fabricCanvas=new fabric.Canvas("canvas",{selection:false});console.log(this.fabricCanvas,"this.fabricCanvas---");this.fabricCanvas.setHeight(600);this.fabricCanvas.setWidth(800);const upperCanvasElement=this.fabricCanvas.upperCanvasEl;upperCanvasElement.style.backgroundColor="transparent";this.fabricCanvas.renderAll();this.setupEventListeners()}setupEventListeners(){document.querySelectorAll(".size-btn").forEach(button=>{button.addEventListener("click",function(event){event.preventDefault();document.querySelectorAll(".size-btn").forEach(btn=>btn.classList.remove("active"));this.classList.add("active")})});document.getElementById("canva_preview").addEventListener("click",()=>{this.fabricCanvas.getObjects().forEach(object=>{object.selectable=false});this.fabricCanvas.discardActiveObject();this.fabricCanvas.renderAll();const sidebar=document.getElementById("sidebar");const mainSection=document.getElementById("main-section");sidebar.classList.remove("col-lg-4");sidebar.classList.add("col-lg-1");mainSection.classList.remove("col-lg-8");mainSection.classList.add("col-lg-11");document.getElementById("pills-tabContent").style.display="none";document.getElementById("pills-tab").style.display="none";document.getElementById("switch_btn").style.display="none";document.getElementById("back_tab").style.display="block";this.fabricCanvas.selection=false;this.fabricCanvas.off("mouse:down");this.fabricCanvas.off("mouse:up");this.fabricCanvas.off("mouse:move")});document.getElementById("back_tab_btn").addEventListener("click",()=>{this.fabricCanvas.getObjects().forEach(object=>{object.selectable=true});const sidebar=document.getElementById("sidebar");const mainSection=document.getElementById("main-section");sidebar.classList.remove("col-lg-1");sidebar.classList.add("col-lg-4");mainSection.classList.remove("col-lg-11");mainSection.classList.add("col-lg-8");document.getElementById("pills-tabContent").style.display="block";document.getElementById("pills-tab").style.display="block";document.getElementById("switch_btn").style.display="block";document.getElementById("back_tab").style.display="none";this.fabricCanvas.selection=true;this.fabricCanvas.on("mouse:down");this.fabricCanvas.on("mouse:up");this.fabricCanvas.on("mouse:move")});document.querySelectorAll(".add_text_btn").forEach(button=>{button.addEventListener("click",function(){const text=this.getAttribute("data-text");let fontSize;switch(text){case"Heading 1":fontSize=36;break;case"Heading 2":fontSize=30;break;case"Heading 3":fontSize=24;break;case"Paragraph":fontSize=18;break;default:fontSize=20}const textbox=new fabric.Textbox(text,{left:50,top:50,width:200,fontSize:fontSize,fill:"black",selectable:true});console.log(this.fabricCanvas,"this.fabricCanvas in textbox-------");this.fabricCanvas.add(textbox);this.fabricCanvas.renderAll();document.querySelector(".front_div").style.display="none";document.querySelector(".back_div").style.display="block"})});document.getElementById("fontFamily").addEventListener("change",()=>{const activeObject=this.fabricCanvas.getActiveObject();if(activeObject&&activeObject.type==="textbox"){activeObject.set("fontFamily",this.value);this.fabricCanvas.renderAll()}});document.querySelectorAll(".text_weight button").forEach(button=>{button.addEventListener("click",function(){const activeObject=this.fabricCanvas.getActiveObject();if(activeObject&&activeObject.type==="textbox"){const buttonClass=this.className.split("_")[0];switch(buttonClass){case"bold":const isBold=activeObject.fontWeight==="bold";activeObject.set({fontWeight:isBold?"300":"bold"});this.classList.toggle("active",!isBold);break;case"italic":const isItalic=activeObject.fontStyle==="italic";activeObject.set({fontStyle:isItalic?"normal":"italic"});this.classList.toggle("active",!isItalic);break;case"underline":const isUnderline=activeObject.underline;activeObject.set({underline:!isUnderline});this.classList.toggle("active",!isUnderline);break}this.fabricCanvas.renderAll()}})});document.getElementById("fontWeight").addEventListener("change",()=>{const activeObject=this.fabricCanvas.getActiveObject();if(activeObject&&activeObject.type==="textbox"){activeObject.set("fontWeight",this.value);this.fabricCanvas.renderAll()}});document.getElementById("fontSize").addEventListener("keyup",()=>{const activeObject=this.fabricCanvas.getActiveObject();if(activeObject&&activeObject.type==="textbox"){const fontSize=this.value||20;activeObject.set({fontSize:parseInt(fontSize,10)});this.fabricCanvas.renderAll()}});document.getElementById("favcolor").addEventListener("change",()=>{const activeObject=this.fabricCanvas.getActiveObject();if(activeObject&&activeObject.type==="textbox"){const color=this.value;activeObject.set({fill:color});this.fabricCanvas.renderAll()}});document.querySelectorAll(".text-align button").forEach(button=>{button.addEventListener("click",function(){document.querySelectorAll(".text-align button").forEach(btn=>btn.classList.remove("active"));this.classList.add("active");const alignment=this.className.split("_")[0];const activeObject=this.fabricCanvas.getActiveObject();if(activeObject&&activeObject.type==="textbox"){activeObject.set({textAlign:alignment});this.fabricCanvas.renderAll()}})});document.getElementById("back_btn").addEventListener("click",event=>{event.preventDefault();document.querySelector(".front_div").style.display="block";document.querySelector(".back_div").style.display="none"});document.querySelector(".next_btn").addEventListener("click",event=>{event.preventDefault();const activeButton=document.querySelector(".size-btn.active");if(activeButton){const height=activeButton.getAttribute("data-height");const width=activeButton.getAttribute("data-width");document.querySelector(".create_artwork_wrapper").style.display="none";const canvaView=document.querySelector(".canva-view");canvaView.style.display="flex";this.fabricCanvas.setHeight(height*96);this.fabricCanvas.setWidth(width*96);this.fabricCanvas.renderAll();console.log(`Canvas height: ${this.fabricCanvas.height}, Canvas width: ${this.fabricCanvas.width}`)}else{console.log("No active button selected.")}});document.getElementById("generateQR").addEventListener("click",()=>{const qrText=document.getElementById("qrText").value;const qrCode=new QRCodeStyling({width:150,height:150,data:qrText,image:null,dotsOptions:{color:"#000",shape:"square"},backgroundOptions:{color:"#fff"}});qrCode.getRawDataURL(dataUrl=>{fabric.Image.fromURL(dataUrl,img=>{img.set({left:100,top:100,angle:0});canvas.add(img)})})});function handleTextSelection(activeObject){if(activeObject.type==="textbox"){console.log("here1",activeObject.fontWeight,activeObject.fontFamily);document.getElementById("fontSize").value=activeObject.fontSize;document.getElementById("fontFamily").value=activeObject.fontFamily||"Arial";const fontWeight=activeObject.fontWeight;if(fontWeight=="normal"){document.getElementById("fontWeight").value="300"}else{document.getElementById("fontWeight").value=fontWeight}const alignmentButtons=document.querySelectorAll(".text-align button");alignmentButtons.forEach(button=>button.classList.remove("active"));const alignment=activeObject.textAlign||"left";document.querySelector(`.text-align .${alignment}_align`).classList.add("active");document.querySelector(".text_weight .bold_btn").classList.toggle("active",activeObject.fontWeight==="bold");document.querySelector(".text_weight .italic_btn").classList.toggle("active",activeObject.fontStyle==="italic");document.querySelector(".text_weight .underline_btn").classList.toggle("active",!!activeObject.underline);document.getElementById("favcolor").value=activeObject.fill||"#000"}}document.querySelectorAll(".removeSelected").forEach(button=>{button.addEventListener("click",function(){const activeObject=fabricCanvas.getActiveObject();if(activeObject){fabricCanvas.remove(activeObject)}})});function handleSelectionEvent(e){const activeObject=e.target;if(activeObject){if(activeObject.type==="image"){if(activeObject.isQR){document.getElementById("pills-qrcode-tab").click()}else{document.getElementById("pills-image-tab").click()}}else if(activeObject.type==="textbox"){document.getElementById("pills-text-tab").click();document.querySelector(".front_div").style.display="none";document.querySelector(".back_div").style.display="block";handleTextSelection(activeObject)}}}this.fabricCanvas.on("selection:created",handleSelectionEvent);this.fabricCanvas.on("selection:updated",handleSelectionEvent);function addImageToCanvas(dataUrl,isQR=false){fabric.Image.fromURL(dataUrl,function(img){img.set({left:50,top:50,selectable:true,isQR:isQR});fabricCanvas.add(img);img.bringToFront();fabricCanvas.renderAll();addImageToList(img)},{crossOrigin:"anonymous"})}function addImageToList(img){const imageList=document.getElementById("imageList");const imageItem=document.createElement("div");imageItem.classList.add("image-item");imageItem.dataset.id=img.id;const imageElement=document.createElement("img");imageElement.src=img.getSrc();imageItem.appendChild(imageElement);const trashButton=document.createElement("button");trashButton.classList.add("trash-button");trashButton.innerHTML="&times;";trashButton.addEventListener("click",function(){fabricCanvas.remove(img);imageList.removeChild(imageItem)});imageItem.appendChild(trashButton);imageList.appendChild(imageItem)}document.getElementById("imageUploader").addEventListener("change",function(event){const file=event.target.files[0];if(!file){return}const reader=new FileReader;reader.onload=function(e){const dataUrl=e.target.result;addImageToCanvas(dataUrl)};reader.readAsDataURL(file)});document.getElementById("addImageFromUrl").addEventListener("click",function(event){event.preventDefault();const imageUrl=document.getElementById("imageUrl").value;if(!imageUrl){alert("Please enter a valid URL.");return}addImageToCanvas(imageUrl)});document.getElementById("flexSwitchCheckDefault").addEventListener("change",function(){const canvasContainer=document.getElementById("canvasContainer");const pillsTabContent=document.getElementById("pills-tabContent");const htmlEditor=document.getElementById("htmlEditor");const sidebar=document.getElementById("sidebar");const mainSection=document.getElementById("main-section");if(this.checked){canvasContainer.style.display="none";pillsTabContent.style.display="none";htmlEditor.style.display="block";sidebar.classList.remove("col-lg-4");sidebar.classList.add("col-lg-1");mainSection.classList.remove("col-lg-8");mainSection.classList.add("col-lg-11");var btn=document.getElementById("canva_preview");btn.disabled=true;const htmlContent=convertCanvasToHTML(fabricCanvas);const htmlCodeElement=document.getElementById("htmlCode");htmlCodeElement.textContent=htmlContent;Prism.highlightElement(htmlCodeElement)}else{canvasContainer.style.display="flex";pillsTabContent.style.display="block";htmlEditor.style.display="none";sidebar.classList.remove("col-lg-1");sidebar.classList.add("col-lg-4");mainSection.classList.remove("col-lg-11");mainSection.classList.add("col-lg-8");var btn=document.getElementById("canva_preview");btn.disabled=false}});function convertCanvasToHTML(canvas){let bodyContent="";canvas.getObjects().forEach(obj=>{if(obj.type==="textbox"){bodyContent+=`<div style="position:absolute; left:${obj.left}px; top:${obj.top}px; width:${obj.width}px; font-size:${obj.fontSize}px; color:${obj.fill}; font-family:${obj.fontFamily};">${obj.text}</div>\n`}else if(obj.type==="image"){bodyContent+=`<img src="${obj.getSrc()}" style="position:absolute; left:${obj.left}px; top:${obj.top}px; width:${obj.width}px; height:${obj.height}px;">\n`}});const fullHtml=`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Canvas to HTML</title>
        <style>
            body { margin: 0; padding: 0; position: relative; width: 100%; height: 100vh; overflow: hidden; }
        </style>
    </head>
    <body>
        ${bodyContent}
    </body>
    </html>
        `;return fullHtml.trim()}document.getElementById("downloadHtml").addEventListener("click",function(){const htmlCode=document.getElementById("htmlCode").textContent;downloadHTMLFile(htmlCode,"canvas.html")});function downloadHTMLFile(content,filename){const element=document.createElement("a");const file=new Blob([content],{type:"text/html"});element.href=URL.createObjectURL(file);element.download=filename;document.body.appendChild(element);element.click();document.body.removeChild(element)}}}